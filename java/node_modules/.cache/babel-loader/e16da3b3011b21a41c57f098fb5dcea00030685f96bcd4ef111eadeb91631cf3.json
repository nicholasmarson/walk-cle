{"ast":null,"code":"import _createForOfIteratorHelper from \"E:/workspace/walk-cle-final-capstone-starter/vue/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.string.search.js\";\nimport mapboxgl from \"mapbox-gl\";\n// import { MapboxSearchBox } from \"@mapbox/search-js-web\";\n// import * as turf from \"@turf/turf\";\nimport MapboxDirections from \"@mapbox/mapbox-gl-directions/dist/mapbox-gl-directions\";\nimport \"@mapbox/mapbox-gl-directions/dist/mapbox-gl-directions.css\";\nimport service from \"../services/locationService.js\";\nimport checkinService from \"../services/CheckInService.js\";\nimport axios from \"axios\";\n// const mapboxgl = require(\"mapbox-gl/dist/mapbox-gl.js\");\n// Retrieve API key from environment variables\nmapboxgl.accessToken = process.env.VUE_APP_MAPBOX_KEY;\nexport default {\n  data: function data() {\n    return {\n      map: null,\n      query: \"\",\n      Type: \"all\",\n      location: {\n        type: \"Point\",\n        coordinates: []\n      },\n      markers: [],\n      stadiums: [],\n      Bars: [],\n      all: [],\n      parks: [],\n      poi: [],\n      coffee: [],\n      popupTexts: [\"This is the first marker's www.google.com\", \"This is the second marker's custom text.\"\n      // Add more custom texts here, one for each marker\n      ],\n\n      searchBox: null,\n      userLocation: {\n        lat: 0,\n        lng: 0\n      }\n      // created(){\n      //   this.stadiums = service.getAllStadiums().then(\n      //     (rep) =>{\n      //       this.stadiums = rep.data;\n      //     }\n      //   )\n      // }\n    };\n  },\n\n  methods: {\n    initMap: function initMap() {\n      // Create map object\n      this.map = new mapboxgl.Map({\n        container: \"map\",\n        style: \"mapbox://styles/mapbox/streets-v12\",\n        center: [this.userLocation.lng, this.userLocation.lat],\n        zoom: 15\n      });\n      this.addMapClickListener();\n    },\n    addMapClickListener: function addMapClickListener() {\n      var _this = this;\n      this.map.on(\"click\", function (e) {\n        _this.setLocation(e.lngLat);\n      });\n    },\n    setLocationCoordinates: function setLocationCoordinates(lngLat) {\n      this.setLocationCoordinates.coordinates = [Math.round(lngLat.lng * 10000) / 10000, Math.round(lngLat.lat * 10000) / 10000];\n    },\n    addMapMarker: function addMapMarker(lngLat) {\n      var marker = new mapboxgl.Marker({\n        color: \"red\"\n      }).setLngLat(lngLat).addTo(this.map);\n      this.markers.push(marker);\n    },\n    removeMapMarkers: function removeMapMarkers() {\n      this.markers.forEach(function (marker) {\n        return marker.remove();\n      });\n      this.markers = [];\n    },\n    setLocation: function setLocation(lngLat) {\n      this.removeMapMarkers();\n      this.addMapMarker(lngLat);\n      this.setLocationCoordinates(lngLat);\n    },\n    requestLocation: function requestLocation() {\n      var _this2 = this;\n      // Request to get the user's current location\n      navigator.geolocation.getCurrentPosition(function (position) {\n        // get the latitude and longitude returned\n        var lat = position.coords.latitude;\n        var lng = position.coords.longitude;\n\n        // set location data\n        _this2.setLocation({\n          lng: lng,\n          lat: lat\n        });\n\n        // move the ap to show the location\n        _this2.map.flyTo({\n          center: [lng, lat],\n          zoom: 15\n        });\n\n        // Store user location\n        _this2.userLocation.lat = lat;\n        _this2.userLocation.lng = lng;\n\n        // Add a marker for the current location\n        _this2.addMapMarker({\n          lng: lng,\n          lat: lat\n        });\n      });\n    },\n    getDirections: function getDirections() {\n      // Set up Mapbox Directions control\n      var directions = new MapboxDirections({\n        accessToken: mapboxgl.accessToken,\n        unit: \"imperial\",\n        profile: \"mapbox/walking\",\n        steps: 3\n      });\n      directions.setOrigin([this.userLocation.lng, this.userLocation.lat]);\n      this.map.addControl(directions, \"bottom-left\");\n\n      // Create a button to toggle directions\n      var toggleDirectionsButton = document.createElement(\"button\");\n      toggleDirectionsButton.innerText = \" Directions\";\n      toggleDirectionsButton.style.position = \"absolute\";\n      toggleDirectionsButton.style.top = \"10px\";\n      toggleDirectionsButton.style.left = \"10px\";\n      toggleDirectionsButton.addEventListener(\"click\", function () {\n        var directionsContainer = document.querySelector(\".mapboxgl-ctrl-bottom-left\");\n        if (directionsContainer) {\n          if (directionsContainer.style.display === \"none\" || !directionsContainer.style.display) {\n            directionsContainer.style.display = \"block\"; // Show directions\n          } else {\n            directionsContainer.style.display = \"none\"; // Hide directions\n          }\n        } else {\n          console.error(\"Directions control element not found in the DOM.\");\n        }\n      });\n\n      // Append the button to the map container\n      var mapContainer = this.map.getContainer();\n      mapContainer.appendChild(toggleDirectionsButton);\n    },\n    // search() {\n    //   // Set up Mapbox Search Box\n    //   const point = turf.point([this.userLocation.lng, this.userLocation.lat]);\n    //   const options = { units: \"miles\" };\n    //   const radius = 5; // 1 mile\n    //   const bbox = turf.bbox(turf.buffer(point, radius, options));\n    //   const searchBox = new MapboxSearchBox();\n    //   searchBox.accessToken = mapboxgl.accessToken;\n    //   searchBox.options = {\n    //     language: \"en\",\n    //     country: \"us\",\n    //     bbox: bbox,\n    //   };\n    //   // searchBox.on('result', (result) => {\n    //   //     const { lng, lat } = result.result.geometry.coordinates;\n    //   //     this.addMapMarker({ lng, lat });\n    //   //     this.getDirections({ lng, lat });\n    //   // });\n    //   this.map.addControl(searchBox);\n    // },\n    geoLocate: function geoLocate() {\n      var _this3 = this;\n      // Adds Location control\n      var geolocateControl = new mapboxgl.GeolocateControl({\n        positionOptions: {\n          enableHighAccuracy: true\n        },\n        trackUserLocation: true,\n        showUserLocation: true\n      });\n      geolocateControl.on(\"geolocate\", function (e) {\n        var lat = e.coords.latitude;\n        var lng = e.coords.longitude;\n        _this3.addMapMarker({\n          lng: lng,\n          lat: lat\n        });\n      });\n      this.map.addControl(geolocateControl);\n    },\n    fetchDataFromAPI: function fetchDataFromAPI() {\n      var _this4 = this;\n      // Assuming 'service.getAllLocations()' is an asynchronous function that returns a promise\n      service.getAllLocations().then(function (response) {\n        // Assuming the response contains an array of locations\n        _this4.locations = response.data;\n      })[\"catch\"](function (error) {\n        console.error(\"Error fetching locations:\", error);\n      });\n    },\n    popupContent: function popupContent() {\n      var _this5 = this;\n      // Define the API endpoint based on the selected location type\n      var apiEndpoint = \"http://localhost:9000/locations/name/\";\n      switch (true) {\n        case this.searchQuery === \"wendy park\":\n          apiEndpoint += \"Wendy%20Park\";\n          break;\n        case this.searchQuery === \"steelers park\":\n          apiEndpoint += \"Settlers%20Park\";\n          break;\n        case this.searchQuery === \"collision bend brewing company\":\n          apiEndpoint += \"Collision%20Bend%20Brewing%20Company\";\n          break;\n        case this.searchQuery === \"butcher and the brewer\":\n          apiEndpoint += \"Butcher%20and%20the%20Brewer\";\n          break;\n        case this.searchQuery === \"brewDog cleveland outpost\":\n          apiEndpoint += \"BrewDog%20Cleveland%20Outpost\";\n          break;\n        case this.searchQuery === \"barley house\":\n          apiEndpoint += \"Barley%20House\";\n          break;\n        case this.searchQuery === \"great lakes brewing\":\n          apiEndpoint += \"Great%20Lakes%20Brewing%20Company\";\n          break;\n        case this.searchQuery === \"progressive field\":\n          apiEndpoint += \"Progressive%20Field\";\n          break;\n        case this.searchQuery === \"cleveland browns stadium\":\n          apiEndpoint += \"Cleveland%20Browns%20Stadium\";\n          break;\n        case this.searchQuery === \"rocket mortgage fieldHouse\":\n          apiEndpoint += \"Rocket%20Mortgage%20FieldHouse\";\n          break;\n        default:\n          break;\n      }\n\n      // Make an API request with the searchQuery and selected location type\n      axios.get(apiEndpoint, {\n        params: {\n          query: this.searchQuery\n        }\n      }).then(function (response) {\n        var location = response.data;\n        // Clear existing markers and popups\n        _this5.clearMarkersAndPopups();\n        var locationId = location.locationId,\n          locationName = location.locationName,\n          locationLatitude = location.locationLatitude,\n          locationLongitude = location.locationLongitude,\n          locationDescription = location.locationDescription,\n          locationSunOpen = location.locationSunOpen,\n          locationSunClose = location.locationSunClose,\n          locationMonOpen = location.locationMonOpen,\n          locationMonClose = location.locationMonClose,\n          locationTueOpen = location.locationTueOpen,\n          locationTueClose = location.locationTueClose,\n          locationWedOpen = location.locationWedOpen,\n          locationWedClose = location.locationWedClose,\n          locationThuOpen = location.locationThuOpen,\n          locationThuClose = location.locationThuClose,\n          locationFriOpen = location.locationFriOpen,\n          locationFriClose = location.locationFriClose,\n          locationSatOpen = location.locationSatOpen,\n          locationSatClose = location.locationSatClose,\n          locationImgUrl = location.locationImgUrl,\n          locationInfoUrl = location.locationInfoUrl;\n\n        // Format the days and opening/closing times\n        // const daysOfWeek = locationDays.join(\", \");\n        // const openingTimes = locationOpeningTimes.join(\", \");\n        // const closingTimes = locationClosingTimes.join(\", \");\n        var marker = new mapboxgl.Marker({\n          color: \"blue\"\n        }).setLngLat([locationLongitude, locationLatitude]).addTo(_this5.map);\n\n        // Create the HTML content for the popup\n        var popupContent = \"\\n        <div>\\n          <h2>\".concat(locationName, \"</h2>\\n          <p>\").concat(locationDescription, \"</p>\\n          <p><strong>Sunday:</strong> \").concat(locationSunOpen, \" - \").concat(locationSunClose, \"</p>\\n          <p><strong>Monday:</strong> \").concat(locationMonOpen, \" - \").concat(locationMonClose, \"</p>\\n          <p><strong>Tuesday:</strong> \").concat(locationTueOpen, \" - \").concat(locationTueClose, \"</p>\\n          <p><strong>Wednesday:</strong> \").concat(locationWedOpen, \" - \").concat(locationWedClose, \"</p>\\n          <p><strong>Thursday:</strong> \").concat(locationThuOpen, \" - \").concat(locationThuClose, \"</p>\\n          <p><strong>Friday:</strong> \").concat(locationFriOpen, \" - \").concat(locationFriClose, \"</p>\\n          <p><strong>Saturday:</strong> \").concat(locationSatOpen, \" - \").concat(locationSatClose, \"</p>\\n          <img src=\\\"\").concat(locationImgUrl, \"\\\" alt=\\\"\").concat(locationName, \"\\\" width=\\\"200\\\" height=auto>\\n          <a href=\\\"\").concat(locationInfoUrl, \"\\\" target=\\\"_blank\\\">More Info</a>\\n          <button id=\\\"checkInBtn\").concat(locationId, \"\\\" class=\\\"check-in-button\\\">Check-In</button>\\n        </div>\\n      \");\n        _this5.map.flyTo({\n          center: [-81.698738, 41.497257],\n          zoom: 14\n        });\n        var popup = new mapboxgl.Popup({\n          offset: 25\n        }).setHTML(popupContent);\n\n        // Attach the popup to the marker\n        marker.setPopup(popup);\n        if (_this5.Type === \"stadiums\") {\n          _this5.stadiums.push(marker);\n        } else if (_this5.Type === \"parks\") {\n          _this5.parks.push(marker);\n        } else if (_this5.Type === \"bars\") {\n          _this5.Bars.push(marker);\n        } else if (_this5.Type === \"all\") {\n          _this5.all.push(marker);\n        }\n        marker.remove;\n      })[\"catch\"](function (error) {\n        console.error(\"Error fetching location data:\", error);\n        // Handle the error and set an appropriate message in the popup\n      });\n\n      this.searchQuery = \"\";\n    },\n    clearMarkersAndPopups: function clearMarkersAndPopups() {\n      // Remove existing markers and popups from the map\n      var _iterator = _createForOfIteratorHelper(this.stadiums),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var marker = _step.value;\n          marker.remove();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      var _iterator2 = _createForOfIteratorHelper(this.parks),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var _marker = _step2.value;\n          _marker.remove();\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      var _iterator3 = _createForOfIteratorHelper(this.Bars),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _marker2 = _step3.value;\n          _marker2.remove();\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n      var _iterator4 = _createForOfIteratorHelper(this.all),\n        _step4;\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var _marker3 = _step4.value;\n          _marker3.remove();\n        }\n\n        // Clear marker arrays\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n      this.stadiums = [];\n      this.parks = [];\n      this.Bars = [];\n      this.all = [];\n    },\n    //  filterNameSearch(){\n    //    // Define the API endpoint based on the selected location type\n    //   let apiEndpoint = \"http://localhost:9000/locations/name/\";\n    //   switch (true) {\n    //   case this.searchQuery === \"wendy park\":\n    //     apiEndpoint += \"Wendy%20Park\";\n    //     break;\n    //     case this.searchQuery === \"steelers park\":\n    //     apiEndpoint += \"Settlers%20Park\";\n    //     break;\n    //     case this.searchQuery === \"collision bend brewing company\":\n    //     apiEndpoint += \"Collision%20Bend%20Brewing%20Company\";\n    //     break;\n    //     case this.searchQuery === \"butcher and the brewer\":\n    //     apiEndpoint += \"Butcher%20and%20the%20Brewer\";\n    //     break;\n    //   case  this.searchQuery === \"brewDog cleveland outpost\":\n    //     apiEndpoint += \"BrewDog%20Cleveland%20Outpost\";\n    //     break;\n    //     case  this.searchQuery === \"barley house\":\n    //     apiEndpoint += \"Barley%20House\";\n    //     break;\n    //   case this.searchQuery === \"great lakes brewing\":\n    //     apiEndpoint += \"Great%20Lakes%20Brewing%20Company\";\n    //     break;\n    //     case this.searchQuery === \"progressive field\":\n    //     apiEndpoint += \"Progressive%20Field\";\n    //     break;\n    //     case this.searchQuery === \"cleveland browns stadium\":\n    //     apiEndpoint += \"Cleveland%20Browns%20Stadium\";\n    //     break;\n    //     case this.searchQuery === \"rocket mortgage fieldHouse\":\n    //     apiEndpoint += \"Rocket%20Mortgage%20FieldHouse\";\n    //     break;\n    //   default:\n    //     break;\n    // }\n    //   // Make an API request with the searchQuery and selected location type\n    //   axios\n    //     .get(apiEndpoint, {\n    //       params: { query: this.searchQuery },\n    //     })\n    //     .then((response) => {\n    //       const location = response.data;\n    // console.log(apiEndpoint)\n    //       // Clear existing markers and popups\n    //       this.removeMarkersAndPopups();\n    //       // Add markers for each location\n    //         const { locationId, locationLatitude, locationLongitude, locationName } = location;\n    //         const marker = new mapboxgl.Marker({ color: \"blue\" })\n    //           .setLngLat([locationLongitude, locationLatitude])\n    //           .addTo(this.map);\n    //         // Create a popup with custom content\n    //         const popupContent = `\n    //           <div>\n    //             <p>${locationName}</p>\n    //             <p>${locationLongitude} \" \" ${locationLatitude}</p>\n    //             <button id=\"checkInBtn${locationId}\" class=\"check-in-button\">Check-In</button>\n    //           </div>\n    //         `;\n    //         //41.497257, -81.698738\n    //         this.map.flyTo({ center: [-81.698738, 41.497257], zoom: 14 });\n    //         const popup = new mapboxgl.Popup({ offset: 25 })\n    //           .setHTML(popupContent);\n    //         // Attach the popup to the marker\n    //         marker.setPopup(popup);\n    //         // Add the marker to the corresponding category array\n    //         // add all of the names as or statments\n    //         if (this.searchQuery === \"progressive field\" || this.searchQuery ===  \"cleveland browns stadium\"\n    //         || this.searchQuery === \"rocket mortgage fieldhouse\" ) {\n    //           this.stadiums.push(marker);\n    //         } else if (this.searchQuery === \"wendy park\" || this.searchQuery === \"steelers park\") {\n    //           this.parks.push(marker);\n    //         } else if (this.searchQuery === \"collision bend brewing company\" || this.searchQuery === \"butcher and the brewer\"\n    //         || this.searchQuery === \"brewDog cleveland outpost\" || this.searchQuery === \"barley house\" || this.searchQuery === \"great lakes brewing\") {\n    //           this.Bars.push(marker);\n    //         }else if (this.searchQuery === \"all\"){\n    //           this.all.push(marker)}\n    //           this.searchQuery = '';\n    //     })\n    //     .catch((error) => {\n    //       console.error(\"Error fetching locations:\", error);\n    //     });\n    //   },\n    filterTypeSearch: function filterTypeSearch() {\n      var _this6 = this;\n      this.clearMarkersAndPopups();\n      // Define the API endpoint based on the selected location type\n      var apiEndpoint = \"http://localhost:9000/locations/\";\n      switch (this.Type) {\n        case \"stadiums\":\n          apiEndpoint += \"Stadiums\";\n          break;\n        case \"parks\":\n          apiEndpoint += \"Parks\";\n          break;\n        case \"bars\":\n          apiEndpoint += \"Bars\";\n          break;\n        default:\n          break;\n      }\n\n      // Make an API request with the searchQuery and selected location type\n      axios.get(apiEndpoint, {\n        params: {\n          query: this.Type\n        } // Corrected to use this.Type\n      }).then(function (response) {\n        var locations = response.data; // Assuming this is an array of locations\n        // Clear existing markers and popups\n        _this6.removeMarkersAndPopups();\n        console.log(apiEndpoint);\n        locations.forEach(function (location) {\n          var locationId = location.locationId,\n            locationName = location.locationName,\n            locationLatitude = location.locationLatitude,\n            locationLongitude = location.locationLongitude,\n            locationDescription = location.locationDescription,\n            locationSunOpen = location.locationSunOpen,\n            locationSunClose = location.locationSunClose,\n            locationMonOpen = location.locationMonOpen,\n            locationMonClose = location.locationMonClose,\n            locationTueOpen = location.locationTueOpen,\n            locationTueClose = location.locationTueClose,\n            locationWedOpen = location.locationWedOpen,\n            locationWedClose = location.locationWedClose,\n            locationThuOpen = location.locationThuOpen,\n            locationThuClose = location.locationThuClose,\n            locationFriOpen = location.locationFriOpen,\n            locationFriClose = location.locationFriClose,\n            locationSatOpen = location.locationSatOpen,\n            locationSatClose = location.locationSatClose,\n            locationImgUrl = location.locationImgUrl,\n            locationInfoUrl = location.locationInfoUrl;\n\n          // Format the days and opening/closing times\n          // const daysOfWeek = locationDays.join(\", \");\n          // const openingTimes = locationOpeningTimes.join(\", \");\n          // const closingTimes = locationClosingTimes.join(\", \");\n          var marker = new mapboxgl.Marker({\n            color: \"blue\"\n          }).setLngLat([locationLongitude, locationLatitude]).addTo(_this6.map);\n\n          // Create the HTML content for the popup\n          var popupContent = \"\\n        <div>\\n          <h2>\".concat(locationName, \"</h2>\\n          <p>\").concat(locationDescription, \"</p>\\n          <p><strong>Sunday:</strong> \").concat(locationSunOpen, \" - \").concat(locationSunClose, \"</p>\\n          <p><strong>Monday:</strong> \").concat(locationMonOpen, \" - \").concat(locationMonClose, \"</p>\\n          <p><strong>Tuesday:</strong> \").concat(locationTueOpen, \" - \").concat(locationTueClose, \"</p>\\n          <p><strong>Wednesday:</strong> \").concat(locationWedOpen, \" - \").concat(locationWedClose, \"</p>\\n          <p><strong>Thursday:</strong> \").concat(locationThuOpen, \" - \").concat(locationThuClose, \"</p>\\n          <p><strong>Friday:</strong> \").concat(locationFriOpen, \" - \").concat(locationFriClose, \"</p>\\n          <p><strong>Saturday:</strong> \").concat(locationSatOpen, \" - \").concat(locationSatClose, \"</p>\\n          <img src=\\\"\").concat(locationImgUrl, \"\\\" alt=\\\"\").concat(locationName, \"\\\" width=\\\"200\\\" height=auto>\\n          <a href=\\\"\").concat(locationInfoUrl, \"\\\" target=\\\"_blank\\\">More Info</a>\\n          <button id=\\\"checkInBtn\").concat(locationId, \"\\\" class=\\\"check-in-button\\\">Check-In</button>\\n        </div>\\n      \");\n          _this6.map.flyTo({\n            center: [-81.698738, 41.497257],\n            zoom: 14\n          });\n          var popup = new mapboxgl.Popup({\n            offset: 25\n          }).setHTML(popupContent);\n\n          // Attach the popup to the marker\n          marker.setPopup(popup);\n          if (_this6.Type === \"stadiums\") {\n            _this6.stadiums.push(marker);\n          } else if (_this6.Type === \"parks\") {\n            _this6.parks.push(marker);\n          } else if (_this6.Type === \"bars\") {\n            _this6.Bars.push(marker);\n          } else if (_this6.Type === \"all\") {\n            _this6.all.push(marker);\n          }\n        });\n        _this6.popup.getElement().querySelector(\".check-in-button\").addEventListener(\"click\", function () {\n          // Extract the locationId from the button's id\n          var buttonId = \"checkInBtn\".concat(locationId);\n          var locationId = buttonId.replace(\"checkInBtn\", \"\");\n          if (locationId >= 1 && locationId <= 2) {\n            checkinService.parkCheckIn(locationId);\n          } else if (locationId >= 3 && locationId <= 7) {\n            checinSerbarCheckIn(locationId);\n          } else if (locationId >= 8 && locationId <= 10) {\n            stadiumCheckIn(locationId);\n          }\n        });\n      })[\"catch\"](function (error) {\n        console.error(\"Error fetching locations:\", error);\n      });\n    },\n    removeMarkersAndPopups: function removeMarkersAndPopups() {\n      this.markers.forEach(function (marker) {\n        marker.remove();\n      });\n      this.all.forEach(function (poi) {\n        return poi.remove();\n      });\n      this.stadiums.forEach(function (poi) {\n        poi.remove();\n      });\n      this.Bars.forEach(function (poi) {\n        poi.remove();\n      });\n      this.parks.forEach(function (poi) {\n        poi.remove();\n      });\n      this.poi.forEach(function (poi) {\n        poi.remove();\n      });\n      this.coffee.forEach(function (poi) {\n        poi.remove();\n      });\n      this.parks = [];\n      this.Bars = [];\n      this.poi = [];\n      this.markers = [];\n      this.coffee = [];\n      this.all = [];\n    }\n  },\n  mounted: function mounted() {\n    var _this7 = this;\n    navigator.geolocation.getCurrentPosition(function (position) {\n      var lat = position.coords.latitude;\n      var lng = position.coords.longitude;\n      _this7.userLocation = {\n        lat: lat,\n        lng: lng\n      };\n      _this7.initMap();\n      _this7.map.flyTo({\n        center: [lng, lat],\n        zoom: 15\n      });\n      _this7.addMapMarker({\n        lng: lng,\n        lat: lat\n      });\n      _this7.clearMarkersAndPopups();\n      _this7.getDirections();\n      _this7.search();\n      _this7.navigation();\n      _this7.geoLocate();\n      _this7.fetchDataFromAPI();\n      _this7.fetchDataFroStadiums();\n    });\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA;AAEA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC,aACA,6CACA;MACA;MAAA,CACA;;MACAC;MACAC;QACAC;QACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;EACA;;EACAC;IACAC;MACA;MACA;QACAC;QACAC;QACAC;QACAC;MACA;MAEA;IACA;IACAC;MAAA;MACA;QACA;MACA;IACA;IACAC;MACA,2CACAC,wCACAA,uCACA;IACA;IACAC;MACA;QAAAC;MAAA,GACAC,kBACAC;MACA;IACA;IACAC;MACA;QAAA;MAAA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MAAA;MACA;MACAC;QACA;QACA;QACA;;QAEA;QACA;UAAAjB;UAAAD;QAAA;;QAEA;QACA;UAAAM;UAAAC;QAAA;;QAEA;QACA;QACA;;QAEA;QACA;UAAAN;UAAAD;QAAA;MACA;IACA;IACAmB;MACA;MACA;QACAC;QACAC;QACAC;QACAC;MACA;MAEAC;MACA;;MAEA;MACA;MACAC;MACAA;MACAA;MACAA;MAEAA;QACA,iDACA,6BACA;QACA;UACA,IACAC,gDACA,oCACA;YACAA;UACA;YACAA;UACA;QACA;UACAC;QACA;MACA;;MAEA;MACA;MACAC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IAEA;IACA;IAEAC;MAAA;MACA;MACA;QACAC;UACAC;QACA;QACAC;QACAC;MACA;MACAC;QACA;QACA;QACA;UAAAjC;UAAAD;QAAA;MACA;MACA;IACA;IAEAmC;MAAA;MACA;MACAC,QACAC,kBACAC;QACA;QACA;MACA,WACA;QACAX;MACA;IACA;IAEAY;MAAA;MACA;MACA;MAEA;QACA;UACAC;UACA;QACA;UACAA;UACA;QACA;UACAA;UACA;QACA;UACAA;UACA;QACA;UACAA;UACA;QACA;UACAA;UACA;QACA;UACAA;UACA;QACA;UACAA;UACA;QACA;UACAA;UACA;QACA;UACAA;UACA;QACA;UACA;MAAA;;MAGA;MACAC,MACAC;QACAC;UAAA1D;QAAA;MACA,GACAqD;QACA;QACA;QACA;QAEA,IACAM,aAsBAzD,SAtBAyD;UAEAC,eAoBA1D,SApBA0D;UACAC,mBAmBA3D,SAnBA2D;UACAC,oBAkBA5D,SAlBA4D;UACAC,sBAiBA7D,SAjBA6D;UACAC,kBAgBA9D,SAhBA8D;UACAC,mBAeA/D,SAfA+D;UACAC,kBAcAhE,SAdAgE;UACAC,mBAaAjE,SAbAiE;UACAC,kBAYAlE,SAZAkE;UACAC,mBAWAnE,SAXAmE;UACAC,kBAUApE,SAVAoE;UACAC,mBASArE,SATAqE;UACAC,kBAQAtE,SARAsE;UACAC,mBAOAvE,SAPAuE;UACAC,kBAMAxE,SANAwE;UACAC,mBAKAzE,SALAyE;UACAC,kBAIA1E,SAJA0E;UACAC,mBAGA3E,SAHA2E;UACAC,iBAEA5E,SAFA4E;UACAC,kBACA7E,SADA6E;;QAGA;QACA;QACA;QACA;QACA;UAAApD;QAAA,GACAC,iDACAC;;QAEA;QACA,4DAEA+B,6CACAG,4EACAC,wGACAE,yGACAE,2GACAE,0GACAE,wGACAE,0GACAE,uFACAE,gHACAC,iGACApB,qFAEA;QACA;UAAAtC;UAAAC;QAAA;QACA;UAAA0D;QAAA,WACA1B,aACA;;QAEA;QACA2B;QACA;UACA;QACA;UACA;QACA;UACA;QACA;UACA;QACA;QACAA;MACA,WACA;QACAvC;QACA;MACA;;MACA;IACA;IACAwC;MACA;MAAA,2CACA;QAAA;MAAA;QAAA;UAAA;UACAD;QACA;MAAA;QAAA;MAAA;QAAA;MAAA;MAAA,4CACA;QAAA;MAAA;QAAA;UAAA;UACAA;QACA;MAAA;QAAA;MAAA;QAAA;MAAA;MAAA,4CACA;QAAA;MAAA;QAAA;UAAA;UACAA;QACA;MAAA;QAAA;MAAA;QAAA;MAAA;MAAA,4CACA;QAAA;MAAA;QAAA;UAAA;UACAA;QACA;;QAEA;MAAA;QAAA;MAAA;QAAA;MAAA;MACA;MACA;MACA;MACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IAEA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IAEA;IACA;IACA;IACA;IACA;IACAE;MAAA;MACA;MACA;MACA;MAEA;QACA;UACA5B;UACA;QACA;UACAA;UACA;QACA;UACAA;UACA;QACA;UACA;MAAA;;MAGA;MACAC,MACAC;QACAC;UAAA1D;QAAA;MACA,GACAqD;QACA;QACA;QACA;QAEAX;QAEA0C;UACA,IACAzB,aAsBAzD,SAtBAyD;YAEAC,eAoBA1D,SApBA0D;YACAC,mBAmBA3D,SAnBA2D;YACAC,oBAkBA5D,SAlBA4D;YACAC,sBAiBA7D,SAjBA6D;YACAC,kBAgBA9D,SAhBA8D;YACAC,mBAeA/D,SAfA+D;YACAC,kBAcAhE,SAdAgE;YACAC,mBAaAjE,SAbAiE;YACAC,kBAYAlE,SAZAkE;YACAC,mBAWAnE,SAXAmE;YACAC,kBAUApE,SAVAoE;YACAC,mBASArE,SATAqE;YACAC,kBAQAtE,SARAsE;YACAC,mBAOAvE,SAPAuE;YACAC,kBAMAxE,SANAwE;YACAC,mBAKAzE,SALAyE;YACAC,kBAIA1E,SAJA0E;YACAC,mBAGA3E,SAHA2E;YACAC,iBAEA5E,SAFA4E;YACAC,kBACA7E,SADA6E;;UAGA;UACA;UACA;UACA;UACA;YAAApD;UAAA,GACAC,iDACAC;;UAEA;UACA,4DAEA+B,6CACAG,4EACAC,wGACAE,yGACAE,2GACAE,0GACAE,wGACAE,0GACAE,uFACAE,gHACAC,iGACApB,qFAEA;UACA;YAAAtC;YAAAC;UAAA;UACA;YAAA0D;UAAA,WACA1B,aACA;;UAEA;UACA2B;UACA;YACA;UACA;YACA;UACA;YACA;UACA;YACA;UACA;QACA;QAEA,aACAI,aACAC,kCACAC;UACA;UACA;UACA;UAEA;YACAC;UACA;YACAC;UACA;YACAC;UACA;QACA;MACA,WAEA;QACAhD;MACA;IACA;IAEAiD;MACA;QACAV;MACA;MACA;QAAA;MAAA;MACA;QACAvE;MACA;MACA;QACAA;MACA;MACA;QACAA;MACA;MACA;QACAA;MACA;MACA;QACAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;EACA;EACAkF;IAAA;IACA3D;MACA;MACA;MACA;QAAAlB;QAAAC;MAAA;MACA;MACA;QAAAK;QAAAC;MAAA;MACA;QAAAN;QAAAD;MAAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;EACA;AACA","names":["mapboxgl","data","map","query","Type","location","type","coordinates","markers","stadiums","Bars","all","parks","poi","coffee","popupTexts","searchBox","userLocation","lat","lng","methods","initMap","container","style","center","zoom","addMapClickListener","setLocationCoordinates","Math","addMapMarker","color","setLngLat","addTo","removeMapMarkers","setLocation","requestLocation","navigator","getDirections","accessToken","unit","profile","steps","directions","toggleDirectionsButton","directionsContainer","console","mapContainer","geoLocate","positionOptions","enableHighAccuracy","trackUserLocation","showUserLocation","geolocateControl","fetchDataFromAPI","service","getAllLocations","then","popupContent","apiEndpoint","axios","get","params","locationId","locationName","locationLatitude","locationLongitude","locationDescription","locationSunOpen","locationSunClose","locationMonOpen","locationMonClose","locationTueOpen","locationTueClose","locationWedOpen","locationWedClose","locationThuOpen","locationThuClose","locationFriOpen","locationFriClose","locationSatOpen","locationSatClose","locationImgUrl","locationInfoUrl","offset","marker","clearMarkersAndPopups","filterTypeSearch","locations","getElement","querySelector","addEventListener","checkinService","checinSerbarCheckIn","stadiumCheckIn","removeMarkersAndPopups","mounted"],"sourceRoot":"src/components","sources":["NewMapBox.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"form-search\">\r\n      <!-- <input type=\"text\" name=\"location\" :value=\"location.coordinates\" disabled /> -->\r\n      <form @submit.prevent=\"popupContent\" class=\"name-search\">\r\n        <label for=\"location\">Location:</label>\r\n        <input type=\"text\" id=\"location\" v-model=\"searchQuery\" />\r\n        <button type=\"submit\">Search</button>\r\n      </form>\r\n      <form @submit.prevent=\"filterTypeSearch\" class=\"type-search\">\r\n        <label for=\"locationType\">Location Type:</label>\r\n        <select id=\"locationType\" v-model=\"Type\">\r\n          <option value=\"all\">All</option>\r\n          <option value=\"stadiums\">Stadiums</option>\r\n          <option value=\"parks\">Parks</option>\r\n          <option value=\"bars\">Bars</option></select\r\n        ><button type=\"submit\">Search</button>\r\n      </form>\r\n    </div>\r\n    <div id=\"map\"></div>\r\n    <!-- <button class=\"btn\" @click=\"requestLocation\">Get Current Location</button>-->\r\n  </div>\r\n</template>\r\n  \r\n<script>\r\nimport mapboxgl from \"mapbox-gl\";\r\n// import { MapboxSearchBox } from \"@mapbox/search-js-web\";\r\n// import * as turf from \"@turf/turf\";\r\nimport MapboxDirections from \"@mapbox/mapbox-gl-directions/dist/mapbox-gl-directions\";\r\nimport \"@mapbox/mapbox-gl-directions/dist/mapbox-gl-directions.css\";\r\nimport service from \"../services/locationService.js\";\r\nimport checkinService from \"../services/CheckInService.js\"\r\nimport axios from \"axios\";\r\n// const mapboxgl = require(\"mapbox-gl/dist/mapbox-gl.js\");\r\n// Retrieve API key from environment variables\r\nmapboxgl.accessToken = process.env.VUE_APP_MAPBOX_KEY;\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      map: null,\r\n      query: \"\",\r\n      Type: \"all\",\r\n      location: {\r\n        type: \"Point\",\r\n        coordinates: [],\r\n      },\r\n      markers: [],\r\n      stadiums: [],\r\n      Bars: [],\r\n      all: [],\r\n      parks: [],\r\n      poi: [],\r\n      coffee: [],\r\n      popupTexts: [\r\n        \"This is the first marker's www.google.com\",\r\n        \"This is the second marker's custom text.\",\r\n        // Add more custom texts here, one for each marker\r\n      ],\r\n      searchBox: null,\r\n      userLocation: {\r\n        lat: 0,\r\n        lng: 0,\r\n      },\r\n      // created(){\r\n      //   this.stadiums = service.getAllStadiums().then(\r\n      //     (rep) =>{\r\n      //       this.stadiums = rep.data;\r\n      //     }\r\n      //   )\r\n      // }\r\n    };\r\n  },\r\n  methods: {\r\n    initMap() {\r\n      // Create map object\r\n      this.map = new mapboxgl.Map({\r\n        container: \"map\",\r\n        style: \"mapbox://styles/mapbox/streets-v12\",\r\n        center: [this.userLocation.lng, this.userLocation.lat],\r\n        zoom: 15,\r\n      });\r\n\r\n      this.addMapClickListener();\r\n    },\r\n    addMapClickListener() {\r\n      this.map.on(\"click\", (e) => {\r\n        this.setLocation(e.lngLat);\r\n      });\r\n    },\r\n    setLocationCoordinates(lngLat) {\r\n      this.setLocationCoordinates.coordinates = [\r\n        Math.round(lngLat.lng * 10000) / 10000,\r\n        Math.round(lngLat.lat * 10000) / 10000,\r\n      ];\r\n    },\r\n    addMapMarker(lngLat) {\r\n      const marker = new mapboxgl.Marker({ color: \"red\" })\r\n        .setLngLat(lngLat)\r\n        .addTo(this.map);\r\n      this.markers.push(marker);\r\n    },\r\n    removeMapMarkers() {\r\n      this.markers.forEach((marker) => marker.remove());\r\n      this.markers = [];\r\n    },\r\n    setLocation(lngLat) {\r\n      this.removeMapMarkers();\r\n      this.addMapMarker(lngLat);\r\n      this.setLocationCoordinates(lngLat);\r\n    },\r\n    requestLocation() {\r\n      // Request to get the user's current location\r\n      navigator.geolocation.getCurrentPosition((position) => {\r\n        // get the latitude and longitude returned\r\n        const lat = position.coords.latitude;\r\n        const lng = position.coords.longitude;\r\n\r\n        // set location data\r\n        this.setLocation({ lng, lat });\r\n\r\n        // move the ap to show the location\r\n        this.map.flyTo({ center: [lng, lat], zoom: 15 });\r\n\r\n        // Store user location\r\n        this.userLocation.lat = lat;\r\n        this.userLocation.lng = lng;\r\n\r\n        // Add a marker for the current location\r\n        this.addMapMarker({ lng, lat });\r\n      });\r\n    },\r\n    getDirections() {\r\n      // Set up Mapbox Directions control\r\n      const directions = new MapboxDirections({\r\n        accessToken: mapboxgl.accessToken,\r\n        unit: \"imperial\",\r\n        profile: \"mapbox/walking\",\r\n        steps: 3,\r\n      });\r\n\r\n      directions.setOrigin([this.userLocation.lng, this.userLocation.lat]);\r\n      this.map.addControl(directions, \"bottom-left\");\r\n\r\n      // Create a button to toggle directions\r\n      const toggleDirectionsButton = document.createElement(\"button\");\r\n      toggleDirectionsButton.innerText = \" Directions\";\r\n      toggleDirectionsButton.style.position = \"absolute\";\r\n      toggleDirectionsButton.style.top = \"10px\";\r\n      toggleDirectionsButton.style.left = \"10px\";\r\n\r\n      toggleDirectionsButton.addEventListener(\"click\", () => {\r\n        const directionsContainer = document.querySelector(\r\n          \".mapboxgl-ctrl-bottom-left\"\r\n        );\r\n        if (directionsContainer) {\r\n          if (\r\n            directionsContainer.style.display === \"none\" ||\r\n            !directionsContainer.style.display\r\n          ) {\r\n            directionsContainer.style.display = \"block\"; // Show directions\r\n          } else {\r\n            directionsContainer.style.display = \"none\"; // Hide directions\r\n          }\r\n        } else {\r\n          console.error(\"Directions control element not found in the DOM.\");\r\n        }\r\n      });\r\n\r\n      // Append the button to the map container\r\n      const mapContainer = this.map.getContainer();\r\n      mapContainer.appendChild(toggleDirectionsButton);\r\n    },\r\n    // search() {\r\n    //   // Set up Mapbox Search Box\r\n    //   const point = turf.point([this.userLocation.lng, this.userLocation.lat]);\r\n    //   const options = { units: \"miles\" };\r\n    //   const radius = 5; // 1 mile\r\n    //   const bbox = turf.bbox(turf.buffer(point, radius, options));\r\n\r\n    //   const searchBox = new MapboxSearchBox();\r\n    //   searchBox.accessToken = mapboxgl.accessToken;\r\n    //   searchBox.options = {\r\n    //     language: \"en\",\r\n    //     country: \"us\",\r\n    //     bbox: bbox,\r\n    //   };\r\n\r\n    //   // searchBox.on('result', (result) => {\r\n    //   //     const { lng, lat } = result.result.geometry.coordinates;\r\n    //   //     this.addMapMarker({ lng, lat });\r\n    //   //     this.getDirections({ lng, lat });\r\n    //   // });\r\n\r\n    //   this.map.addControl(searchBox);\r\n    // },\r\n\r\n    geoLocate() {\r\n      // Adds Location control\r\n      const geolocateControl = new mapboxgl.GeolocateControl({\r\n        positionOptions: {\r\n          enableHighAccuracy: true,\r\n        },\r\n        trackUserLocation: true,\r\n        showUserLocation: true,\r\n      });\r\n      geolocateControl.on(\"geolocate\", (e) => {\r\n        const lat = e.coords.latitude;\r\n        const lng = e.coords.longitude;\r\n        this.addMapMarker({ lng, lat });\r\n      });\r\n      this.map.addControl(geolocateControl);\r\n    },\r\n\r\n    fetchDataFromAPI() {\r\n      // Assuming 'service.getAllLocations()' is an asynchronous function that returns a promise\r\n      service\r\n        .getAllLocations()\r\n        .then((response) => {\r\n          // Assuming the response contains an array of locations\r\n          this.locations = response.data;\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Error fetching locations:\", error);\r\n        });\r\n    },\r\n\r\n    popupContent() {\r\n      // Define the API endpoint based on the selected location type\r\n      let apiEndpoint = \"http://localhost:9000/locations/name/\";\r\n\r\n      switch (true) {\r\n        case this.searchQuery === \"wendy park\":\r\n          apiEndpoint += \"Wendy%20Park\";\r\n          break;\r\n        case this.searchQuery === \"steelers park\":\r\n          apiEndpoint += \"Settlers%20Park\";\r\n          break;\r\n        case this.searchQuery === \"collision bend brewing company\":\r\n          apiEndpoint += \"Collision%20Bend%20Brewing%20Company\";\r\n          break;\r\n        case this.searchQuery === \"butcher and the brewer\":\r\n          apiEndpoint += \"Butcher%20and%20the%20Brewer\";\r\n          break;\r\n        case this.searchQuery === \"brewDog cleveland outpost\":\r\n          apiEndpoint += \"BrewDog%20Cleveland%20Outpost\";\r\n          break;\r\n        case this.searchQuery === \"barley house\":\r\n          apiEndpoint += \"Barley%20House\";\r\n          break;\r\n        case this.searchQuery === \"great lakes brewing\":\r\n          apiEndpoint += \"Great%20Lakes%20Brewing%20Company\";\r\n          break;\r\n        case this.searchQuery === \"progressive field\":\r\n          apiEndpoint += \"Progressive%20Field\";\r\n          break;\r\n        case this.searchQuery === \"cleveland browns stadium\":\r\n          apiEndpoint += \"Cleveland%20Browns%20Stadium\";\r\n          break;\r\n        case this.searchQuery === \"rocket mortgage fieldHouse\":\r\n          apiEndpoint += \"Rocket%20Mortgage%20FieldHouse\";\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n\r\n      // Make an API request with the searchQuery and selected location type\r\n      axios\r\n        .get(apiEndpoint, {\r\n          params: { query: this.searchQuery },\r\n        })\r\n        .then((response) => {\r\n          const location = response.data;\r\n          // Clear existing markers and popups\r\n          this.clearMarkersAndPopups();\r\n\r\n          const {\r\n            locationId,\r\n            // locationTypeName,\r\n            locationName,\r\n            locationLatitude,\r\n            locationLongitude,\r\n            locationDescription,\r\n            locationSunOpen,\r\n            locationSunClose,\r\n            locationMonOpen,\r\n            locationMonClose,\r\n            locationTueOpen,\r\n            locationTueClose,\r\n            locationWedOpen,\r\n            locationWedClose,\r\n            locationThuOpen,\r\n            locationThuClose,\r\n            locationFriOpen,\r\n            locationFriClose,\r\n            locationSatOpen,\r\n            locationSatClose,\r\n            locationImgUrl,\r\n            locationInfoUrl,\r\n          } = location;\r\n\r\n          // Format the days and opening/closing times\r\n          // const daysOfWeek = locationDays.join(\", \");\r\n          // const openingTimes = locationOpeningTimes.join(\", \");\r\n          // const closingTimes = locationClosingTimes.join(\", \");\r\n          const marker = new mapboxgl.Marker({ color: \"blue\" })\r\n            .setLngLat([locationLongitude, locationLatitude])\r\n            .addTo(this.map);\r\n\r\n          // Create the HTML content for the popup\r\n          const popupContent = `\r\n        <div>\r\n          <h2>${locationName}</h2>\r\n          <p>${locationDescription}</p>\r\n          <p><strong>Sunday:</strong> ${locationSunOpen} - ${locationSunClose}</p>\r\n          <p><strong>Monday:</strong> ${locationMonOpen} - ${locationMonClose}</p>\r\n          <p><strong>Tuesday:</strong> ${locationTueOpen} - ${locationTueClose}</p>\r\n          <p><strong>Wednesday:</strong> ${locationWedOpen} - ${locationWedClose}</p>\r\n          <p><strong>Thursday:</strong> ${locationThuOpen} - ${locationThuClose}</p>\r\n          <p><strong>Friday:</strong> ${locationFriOpen} - ${locationFriClose}</p>\r\n          <p><strong>Saturday:</strong> ${locationSatOpen} - ${locationSatClose}</p>\r\n          <img src=\"${locationImgUrl}\" alt=\"${locationName}\" width=\"200\" height=auto>\r\n          <a href=\"${locationInfoUrl}\" target=\"_blank\">More Info</a>\r\n          <button id=\"checkInBtn${locationId}\" class=\"check-in-button\">Check-In</button>\r\n        </div>\r\n      `;\r\n          this.map.flyTo({ center: [-81.698738, 41.497257], zoom: 14 });\r\n          const popup = new mapboxgl.Popup({ offset: 25 }).setHTML(\r\n            popupContent\r\n          );\r\n\r\n          // Attach the popup to the marker\r\n          marker.setPopup(popup);\r\n          if (this.Type === \"stadiums\") {\r\n            this.stadiums.push(marker);\r\n          } else if (this.Type === \"parks\") {\r\n            this.parks.push(marker);\r\n          } else if (this.Type === \"bars\") {\r\n            this.Bars.push(marker);\r\n          } else if (this.Type === \"all\") {\r\n            this.all.push(marker);\r\n          }\r\n          marker.remove;\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Error fetching location data:\", error);\r\n          // Handle the error and set an appropriate message in the popup\r\n        });\r\n      this.searchQuery = \"\";\r\n    },\r\n    clearMarkersAndPopups() {\r\n      // Remove existing markers and popups from the map\r\n      for (const marker of this.stadiums) {\r\n        marker.remove();\r\n      }\r\n      for (const marker of this.parks) {\r\n        marker.remove();\r\n      }\r\n      for (const marker of this.Bars) {\r\n        marker.remove();\r\n      }\r\n      for (const marker of this.all) {\r\n        marker.remove();\r\n      }\r\n\r\n      // Clear marker arrays\r\n      this.stadiums = [];\r\n      this.parks = [];\r\n      this.Bars = [];\r\n      this.all = [];\r\n    },\r\n    //  filterNameSearch(){\r\n    //    // Define the API endpoint based on the selected location type\r\n    //   let apiEndpoint = \"http://localhost:9000/locations/name/\";\r\n\r\n    //   switch (true) {\r\n    //   case this.searchQuery === \"wendy park\":\r\n    //     apiEndpoint += \"Wendy%20Park\";\r\n    //     break;\r\n    //     case this.searchQuery === \"steelers park\":\r\n    //     apiEndpoint += \"Settlers%20Park\";\r\n    //     break;\r\n    //     case this.searchQuery === \"collision bend brewing company\":\r\n    //     apiEndpoint += \"Collision%20Bend%20Brewing%20Company\";\r\n    //     break;\r\n    //     case this.searchQuery === \"butcher and the brewer\":\r\n    //     apiEndpoint += \"Butcher%20and%20the%20Brewer\";\r\n    //     break;\r\n    //   case  this.searchQuery === \"brewDog cleveland outpost\":\r\n    //     apiEndpoint += \"BrewDog%20Cleveland%20Outpost\";\r\n    //     break;\r\n    //     case  this.searchQuery === \"barley house\":\r\n    //     apiEndpoint += \"Barley%20House\";\r\n    //     break;\r\n    //   case this.searchQuery === \"great lakes brewing\":\r\n    //     apiEndpoint += \"Great%20Lakes%20Brewing%20Company\";\r\n    //     break;\r\n    //     case this.searchQuery === \"progressive field\":\r\n    //     apiEndpoint += \"Progressive%20Field\";\r\n    //     break;\r\n    //     case this.searchQuery === \"cleveland browns stadium\":\r\n    //     apiEndpoint += \"Cleveland%20Browns%20Stadium\";\r\n    //     break;\r\n    //     case this.searchQuery === \"rocket mortgage fieldHouse\":\r\n    //     apiEndpoint += \"Rocket%20Mortgage%20FieldHouse\";\r\n    //     break;\r\n    //   default:\r\n\r\n    //     break;\r\n    // }\r\n    //   // Make an API request with the searchQuery and selected location type\r\n    //   axios\r\n    //     .get(apiEndpoint, {\r\n    //       params: { query: this.searchQuery },\r\n    //     })\r\n    //     .then((response) => {\r\n    //       const location = response.data;\r\n    // console.log(apiEndpoint)\r\n    //       // Clear existing markers and popups\r\n    //       this.removeMarkersAndPopups();\r\n\r\n    //       // Add markers for each location\r\n\r\n    //         const { locationId, locationLatitude, locationLongitude, locationName } = location;\r\n    //         const marker = new mapboxgl.Marker({ color: \"blue\" })\r\n    //           .setLngLat([locationLongitude, locationLatitude])\r\n    //           .addTo(this.map);\r\n\r\n    //         // Create a popup with custom content\r\n    //         const popupContent = `\r\n    //           <div>\r\n    //             <p>${locationName}</p>\r\n    //             <p>${locationLongitude} \" \" ${locationLatitude}</p>\r\n    //             <button id=\"checkInBtn${locationId}\" class=\"check-in-button\">Check-In</button>\r\n    //           </div>\r\n    //         `;\r\n    //         //41.497257, -81.698738\r\n    //         this.map.flyTo({ center: [-81.698738, 41.497257], zoom: 14 });\r\n    //         const popup = new mapboxgl.Popup({ offset: 25 })\r\n    //           .setHTML(popupContent);\r\n\r\n    //         // Attach the popup to the marker\r\n    //         marker.setPopup(popup);\r\n\r\n    //         // Add the marker to the corresponding category array\r\n    //         // add all of the names as or statments\r\n    //         if (this.searchQuery === \"progressive field\" || this.searchQuery ===  \"cleveland browns stadium\"\r\n    //         || this.searchQuery === \"rocket mortgage fieldhouse\" ) {\r\n    //           this.stadiums.push(marker);\r\n    //         } else if (this.searchQuery === \"wendy park\" || this.searchQuery === \"steelers park\") {\r\n    //           this.parks.push(marker);\r\n    //         } else if (this.searchQuery === \"collision bend brewing company\" || this.searchQuery === \"butcher and the brewer\"\r\n    //         || this.searchQuery === \"brewDog cleveland outpost\" || this.searchQuery === \"barley house\" || this.searchQuery === \"great lakes brewing\") {\r\n    //           this.Bars.push(marker);\r\n    //         }else if (this.searchQuery === \"all\"){\r\n    //           this.all.push(marker)}\r\n\r\n    //           this.searchQuery = '';\r\n\r\n    //     })\r\n    //     .catch((error) => {\r\n    //       console.error(\"Error fetching locations:\", error);\r\n    //     });\r\n    //   },\r\n    filterTypeSearch() {\r\n      this.clearMarkersAndPopups();\r\n      // Define the API endpoint based on the selected location type\r\n      let apiEndpoint = \"http://localhost:9000/locations/\";\r\n\r\n      switch (this.Type) {\r\n        case \"stadiums\":\r\n          apiEndpoint += \"Stadiums\";\r\n          break;\r\n        case \"parks\":\r\n          apiEndpoint += \"Parks\";\r\n          break;\r\n        case \"bars\":\r\n          apiEndpoint += \"Bars\";\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n\r\n      // Make an API request with the searchQuery and selected location type\r\n      axios\r\n        .get(apiEndpoint, {\r\n          params: { query: this.Type }, // Corrected to use this.Type\r\n        })\r\n        .then((response) => {\r\n          const locations = response.data; // Assuming this is an array of locations\r\n          // Clear existing markers and popups\r\n          this.removeMarkersAndPopups();\r\n\r\n          console.log(apiEndpoint);\r\n\r\n          locations.forEach((location) => {\r\n            const {\r\n              locationId,\r\n              // locationTypeName,\r\n              locationName,\r\n              locationLatitude,\r\n              locationLongitude,\r\n              locationDescription,\r\n              locationSunOpen,\r\n              locationSunClose,\r\n              locationMonOpen,\r\n              locationMonClose,\r\n              locationTueOpen,\r\n              locationTueClose,\r\n              locationWedOpen,\r\n              locationWedClose,\r\n              locationThuOpen,\r\n              locationThuClose,\r\n              locationFriOpen,\r\n              locationFriClose,\r\n              locationSatOpen,\r\n              locationSatClose,\r\n              locationImgUrl,\r\n              locationInfoUrl,\r\n            } = location;\r\n\r\n            // Format the days and opening/closing times\r\n            // const daysOfWeek = locationDays.join(\", \");\r\n            // const openingTimes = locationOpeningTimes.join(\", \");\r\n            // const closingTimes = locationClosingTimes.join(\", \");\r\n            const marker = new mapboxgl.Marker({ color: \"blue\" })\r\n              .setLngLat([locationLongitude, locationLatitude])\r\n              .addTo(this.map);\r\n\r\n            // Create the HTML content for the popup\r\n            const popupContent = `\r\n        <div>\r\n          <h2>${locationName}</h2>\r\n          <p>${locationDescription}</p>\r\n          <p><strong>Sunday:</strong> ${locationSunOpen} - ${locationSunClose}</p>\r\n          <p><strong>Monday:</strong> ${locationMonOpen} - ${locationMonClose}</p>\r\n          <p><strong>Tuesday:</strong> ${locationTueOpen} - ${locationTueClose}</p>\r\n          <p><strong>Wednesday:</strong> ${locationWedOpen} - ${locationWedClose}</p>\r\n          <p><strong>Thursday:</strong> ${locationThuOpen} - ${locationThuClose}</p>\r\n          <p><strong>Friday:</strong> ${locationFriOpen} - ${locationFriClose}</p>\r\n          <p><strong>Saturday:</strong> ${locationSatOpen} - ${locationSatClose}</p>\r\n          <img src=\"${locationImgUrl}\" alt=\"${locationName}\" width=\"200\" height=auto>\r\n          <a href=\"${locationInfoUrl}\" target=\"_blank\">More Info</a>\r\n          <button id=\"checkInBtn${locationId}\" class=\"check-in-button\">Check-In</button>\r\n        </div>\r\n      `;\r\n            this.map.flyTo({ center: [-81.698738, 41.497257], zoom: 14 });\r\n            const popup = new mapboxgl.Popup({ offset: 25 }).setHTML(\r\n              popupContent\r\n            );\r\n\r\n            // Attach the popup to the marker\r\n            marker.setPopup(popup);\r\n            if (this.Type === \"stadiums\") {\r\n              this.stadiums.push(marker);\r\n            } else if (this.Type === \"parks\") {\r\n              this.parks.push(marker);\r\n            } else if (this.Type === \"bars\") {\r\n              this.Bars.push(marker);\r\n            } else if (this.Type === \"all\") {\r\n              this.all.push(marker);\r\n            }\r\n          });\r\n\r\n          this.popup\r\n            .getElement()\r\n            .querySelector(\".check-in-button\")\r\n            .addEventListener(\"click\", () => {\r\n              // Extract the locationId from the button's id\r\n              const buttonId = `checkInBtn${locationId}`;\r\n              const locationId = buttonId.replace(\"checkInBtn\", \"\");\r\n\r\n              if (locationId >= 1 && locationId <= 2) {\r\n                checkinService.parkCheckIn(locationId)\r\n              } else if (locationId >= 3 && locationId <= 7) {\r\n                checinSerbarCheckIn(locationId);\r\n              } else if (locationId >= 8 && locationId <= 10) {\r\n                stadiumCheckIn(locationId);\r\n              }\r\n            });\r\n        })\r\n\r\n        .catch((error) => {\r\n          console.error(\"Error fetching locations:\", error);\r\n        });\r\n    },\r\n\r\n    removeMarkersAndPopups() {\r\n      this.markers.forEach((marker) => {\r\n        marker.remove();\r\n      });\r\n      this.all.forEach((poi) => poi.remove());\r\n      this.stadiums.forEach((poi) => {\r\n        poi.remove();\r\n      });\r\n      this.Bars.forEach((poi) => {\r\n        poi.remove();\r\n      });\r\n      this.parks.forEach((poi) => {\r\n        poi.remove();\r\n      });\r\n      this.poi.forEach((poi) => {\r\n        poi.remove();\r\n      });\r\n      this.coffee.forEach((poi) => {\r\n        poi.remove();\r\n      });\r\n      this.parks = [];\r\n      this.Bars = [];\r\n      this.poi = [];\r\n      this.markers = [];\r\n      this.coffee = [];\r\n      this.all = [];\r\n    },\r\n  },\r\n  mounted() {\r\n    navigator.geolocation.getCurrentPosition((position) => {\r\n      const lat = position.coords.latitude;\r\n      const lng = position.coords.longitude;\r\n      this.userLocation = { lat, lng };\r\n      this.initMap();\r\n      this.map.flyTo({ center: [lng, lat], zoom: 15 });\r\n      this.addMapMarker({ lng, lat });\r\n      this.clearMarkersAndPopups();\r\n      this.getDirections();\r\n      this.search();\r\n      this.navigation();\r\n      this.geoLocate();\r\n      this.fetchDataFromAPI();\r\n      this.fetchDataFroStadiums();\r\n    });\r\n  },\r\n};\r\n</script>\r\n  \r\n<style scoped>\r\n#map {\r\n  grid-area: map;\r\n  width: 100vw;\r\n  height: 100%;\r\n}\r\nlabel {\r\n  display: inline-flex;\r\n}\r\n\r\n.name-search {\r\n  display: inline-block;\r\n  grid-area: name;\r\n  padding-right: 5px;\r\n  font-family: \"Urbanist\", sans-serif;\r\n  background: #407f7f;\r\n  color: #fff;\r\n\r\n  cursor: pointer;\r\n  text-decoration: none;\r\n  font-size: 15px;\r\n  width: 40%;\r\n}\r\n\r\n.type-search {\r\n  display: inline-block;\r\n  grid-area: name;\r\n  padding-right: 5px;\r\n  font-family: \"Urbanist\", sans-serif;\r\n  background: #407f7f;\r\n  color: #fff;\r\n  padding-top: 20px;\r\n  text-align: center;\r\n  cursor: pointer;\r\n  text-decoration: none;\r\n  font-size: 15px;\r\n  width: 40%;\r\n}\r\n\r\n.mapbox-directions-instructions {\r\n  font-family: \"Urbanist\", sans-serif;\r\n  font-size: 14px;\r\n  color: #333;\r\n}\r\n\r\n.mapbox-directions-route-summary {\r\n  height: 1vh;\r\n  width: 1vw;\r\n  font-family: \"Urbanist\", sans-serif;\r\n}\r\n\r\n.mapbox-directions-step {\r\n  height: 1vh;\r\n  width: 1vw;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.mapbox-directions-step-number {\r\n  height: 1vh;\r\n  width: 1vw;\r\n  font-weight: bold;\r\n  color: #0078d4;\r\n}\r\n\r\n.mapbox-directions-step-text {\r\n  height: 1vh;\r\n  width: 1vw;\r\n  color: #000000;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}